<!DOCTYPE html>
<body>
<p>Create a 854x480 canvas filled blue, with two 200x200 boxes colored red and yellow.
<script src="util.js"></script>
<script>

// SET UP THE CANVAS AND THE GL CONTEXT

// Create the canvas and resize it to 854x480
var canvas = document.createElement("canvas")
document.body.appendChild(canvas)
canvas.width = 854
canvas.height = 480

// Create a webGL context from the canvas
var gl = canvas.getContext("webgl")
if (!gl) throw "webgl context could not be initialized"

// This is the size of the drawing buffer, 854, 480 in this case.
// Should be equivalent to gl.canvas.width and gl.canvas.height.
console.log(gl.drawingBufferWidth, gl.drawingBufferHeight)

// It's important to call gl.viewport if you ever resize the canvas.
// Any of the following would be fine.
gl.viewport(0, 0, 854, 480)
gl.viewport(0, 0, gl.canvas.width, gl.canvas.height)
gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight)

// Output: [0, 0, 854, 480]
console.log(gl.getParameter(gl.VIEWPORT))


// COLOR THE ENTIRE CANVAS BLUE

// Set the clear color to blue (0, 0, 0.5)
// The last number (1) is the alpha value. 1 = completely opaque.
gl.clearColor(0, 0, 0.5, 1)

// Output: [0, 0, 1, 1]
console.log(gl.getParameter(gl.COLOR_CLEAR_VALUE))

// Clear the canvas (set every pixel to the clear color)
gl.clear(gl.COLOR_BUFFER_BIT)


// COLOR A BOX RED

// Output: false
console.log(gl.getParameter(gl.SCISSOR_TEST))

// Output: [0, 0, 854, 480]
console.log(gl.getParameter(gl.SCISSOR_BOX))

gl.enable(gl.SCISSOR_TEST)
// Output: true
console.log(gl.getParameter(gl.SCISSOR_TEST))

// Restrict the draw region to a 200x200 box with lower-left corner at (160, 10),
// near the bottom.
gl.scissor(160, 10, 200, 200)
// Output: [160, 10, 200, 200]
console.log(gl.getParameter(gl.SCISSOR_BOX))

// Clear the scissor area to red.
gl.clearColor(0.5, 0, 0, 1)
gl.clear(gl.COLOR_BUFFER_BIT)


// NOW FOR A YELLOW BOX

// (260, 110) is 100 pixels up and to the right from (160, 10).
gl.scissor(260, 110, 200, 200)
gl.clearColor(0.5, 0.5, 0, 1)
gl.clear(gl.COLOR_BUFFER_BIT)

// Disable scissor testing - any subsequent draws can access the entire viewport.
gl.disable(gl.SCISSOR_TEST)

</script>

